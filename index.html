
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evaluador CNBV</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <!-- Encabezado -->
  <header class="bg-blue-800 text-white py-6 text-center">
    <h1 class="text-3xl font-bold">Evaluador de Cumplimiento Normativo Bancario</h1>
    <p class="text-sm">Basado en matriz CNBV - Evaluación por riesgo y causales</p>
  </header>

  <!-- Sección de identificación -->
  <section class="max-w-xl mx-auto my-6 p-6 bg-white rounded-xl shadow-md">
    <label class="block font-semibold mb-1">Nombre del Banco:</label>
    <input type="text" id="nombreBanco" class="w-full mb-4 p-2 border rounded" placeholder="Ej. Banco Alfa">

    <label class="block font-semibold mb-1">Selecciona el tipo de banco:</label>
    <select id="tipoBanco" class="w-full p-2 border rounded">
      <option value="universales">Banco Universal</option>
      <option value="digitales">Banco Digital</option>
      <option value="retail">Banco de Consumo</option>
      <option value="patrimoniales">Banca Patrimonial</option>
      <option value="nicho">Banco de Nicho</option>
      <option value="desarrollo">Banco de Desarrollo</option>
    </select>

    <button onclick="iniciarEvaluacion()" class="mt-4 w-full bg-blue-700 text-white py-2 rounded hover:bg-blue-800">Iniciar Evaluación</button>
  </section>

  <!-- Contenedor de evaluación dinámica -->
  <section id="evaluacion" class="max-w-2xl mx-auto p-4 hidden bg-white rounded-xl shadow-md">
    <div id="pregunta" class="text-xl font-bold mb-4">Requerimiento Normativo</div>
    <div class="flex space-x-4">
      <button class="bg-green-600 text-white px-4 py-2 rounded" onclick="responder(true)">Cumple</button>
      <button class="bg-red-600 text-white px-4 py-2 rounded" onclick="responder(false)">No cumple</button>
      <button class="bg-gray-300 text-gray-700 px-4 py-2 rounded" onclick="verMas()">Ver más info</button>
    </div>
    <div id="infoExtra" class="mt-4 hidden bg-gray-100 p-4 rounded"></div>
  </section>

  <!-- Resultado final -->
  <section id="resultadoFinal" class="max-w-3xl mx-auto my-10 p-6 bg-white rounded-xl shadow-md hidden">
    <h2 class="text-2xl font-bold text-center mb-4">Resultados de Cumplimiento</h2>
    <canvas id="graficoRiesgos" class="w-full h-64"></canvas>
    <div id="causales" class="mt-6">
      <h3 class="text-lg font-bold mb-2">Causales de Revocación</h3>
      <ul id="listaCausales" class="list-disc list-inside"></ul>
    </div>
  </section>

  <!-- Justificación -->
  <section class="max-w-3xl mx-auto my-8 text-center">
    <a href="#" class="text-blue-700 underline">Leer justificación de ponderación por tipo de banco</a>
  </section>

  <script>
    // VARIABLES
    const requerimientos = [
      { riesgo: 'Crédito', texto: '¿Cuenta con políticas documentadas para evaluación de crédito?', info: 'Artículo 73, CUB...' },
      { riesgo: 'Crédito', texto: '¿Se realiza verificación de historial crediticio?', info: 'Artículo 74, CUB...' },
      { riesgo: 'Mercado', texto: '¿Existe control de posición diaria?', info: 'Artículo 88, CUB...' },
      // ... se agregan los demás
    ];

    let index = 0;
    let respuestas = [];

    function iniciarEvaluacion() {
      document.getElementById('evaluacion').classList.remove('hidden');
      mostrarPregunta();
    }

    function mostrarPregunta() {
      document.getElementById('infoExtra').classList.add('hidden');
      const req = requerimientos[index];
      document.getElementById('pregunta').innerText = req.texto;
    }

    function responder(cumple) {
      respuestas.push({ ...requerimientos[index], cumple });
      index++;
      if (index < requerimientos.length) {
        mostrarPregunta();
      } else {
        document.getElementById('evaluacion').classList.add('hidden');
        mostrarResultados();
      }
    }

    function verMas() {
      const info = requerimientos[index].info;
      const div = document.getElementById('infoExtra');
      div.classList.remove('hidden');
      div.innerText = info;
    }

    function mostrarResultados() {
      document.getElementById('resultadoFinal').classList.remove('hidden');
      // AQUI iría el cálculo real de ponderación y gráfico
      document.getElementById('listaCausales').innerHTML = '<li>Artículo 10 LIC - Incumplimiento grave</li><li>Artículo 12 LIC - No mantener reservas suficientes</li>';
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
